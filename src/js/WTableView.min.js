WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTableView",function(q,g,d,l,r,I){function D(a){return J?f.isGecko?-a.scrollLeft:a.scrollWidth-a.clientWidth-a.scrollLeft:a.scrollLeft}function w(a){var b=-1,c=-1,e=false,k=false,h=null;for(a=f.target(a);a;){var i=$(a);if(i.hasClass("Wt-tv-contents"))break;else if(i.hasClass("Wt-tv-c")){if(a.getAttribute("drop")==="true")k=true;if(i.hasClass(I))e=true;h=a;a=a.parentNode;b=a.className.split(" ")[0].substring(7)*1;c=i.index();break}a=a.parentNode}return{columnId:b,
rowIdx:c,selected:e,drop:k,el:h}}function E(){return f.pxself(d.firstChild,"lineHeight")}function x(a){var b,c,e=a.parentNode.childNodes;b=0;for(c=e.length;b<c;++b)if(e[b]==a)return b;return-1}function K(a,b){var c=$(document.body).hasClass("Wt-rtl");if(c)b=-b;var e=a.className.split(" ")[0],k=e.substring(7)*1,h=a.parentNode,i=h.parentNode!==l,j=i?r.firstChild:d.firstChild,m=j.firstChild;e=$(j).find("."+e).get(0);var n=a.nextSibling,o=e.nextSibling,t=f.pxself(a,"width")-1+b,v=f.pxself(h,"width")+
b+"px";h.style.width=j.style.width=m.style.width=v;if(i){r.style.width=v;r.firstChild.style.width=v;d.style.left=v;l.style.left=v}a.style.width=t+1+"px";e.style.width=t+7+"px";for(q.layouts2.adjust(g.childNodes[0].id,[[1,1]]);n;n=n.nextSibling)if(o){if(c)o.style.right=f.pxself(o,"right")+b+"px";else o.style.left=f.pxself(o,"left")+b+"px";o=o.nextSibling}q.emit(g,"columnResized",k,parseInt(t));F.autoJavaScript()}jQuery.data(g,"obj",this);var F=this,f=q.WT,J=$(document.body).hasClass("Wt-rtl"),y=0,
z=0,A=0,B=0,C=false,u=0,p=0,G=0,H=0;l.onscroll=function(){d.scrollLeft=l.scrollLeft;F.onContentsContainerScroll()};this.onContentsContainerScroll=function(){p=l.scrollLeft=d.scrollLeft;u=r.scrollTop=d.scrollTop;if(!(d.scrollTop==0&&f.isAndroid))if(d.clientWidth&&d.clientHeight&&!C&&(d.scrollTop<A||d.scrollTop>B||d.scrollLeft<y||d.scrollLeft>z))q.emit(g,"scrolled",D(d),d.scrollTop,d.clientWidth,d.clientHeight)};d.wtResize=function(a,b,c){if(b-G>(z-y)/2||c-H>(B-A)/2){G=b;H=c;b=a.clientHeight==a.firstChild.clientHeight?
-1:a.clientHeight;q.emit(g,"scrolled",D(a),a.scrollTop,a.clientWidth,b)}};this.mouseDown=function(a,b){f.capture(null);a=w(b);g.getAttribute("drag")==="true"&&a.selected&&q._p_.dragStart(g,b)};this.resizeHandleMDown=function(a,b){var c=a.parentNode,e=-(f.pxself(c,"width")-1),k=1E4;if($(document.body).hasClass("Wt-rtl")){var h=e;e=-k;k=-h}new f.SizeHandle(f,"h",a.offsetWidth,g.offsetHeight,e,k,"Wt-hsh2",function(i){K(c,i)},a,g,b,-2,-1)};this.scrolled=function(a,b,c,e){y=a;z=b;A=c;B=e};this.resetScroll=
function(){l.scrollLeft=p;d.scrollLeft=p;d.scrollTop=u;r.scrollTop=u};this.setScrollToPending=function(){C=true};this.scrollToPx=function(a,b){u=b;p=a;this.resetScroll()};this.scrollTo=function(a,b,c){C=false;if(b!=-1){a=d.scrollTop;var e=d.clientHeight;if(c==0)if(a+e<b)c=1;else if(b<a)c=2;switch(c){case 1:d.scrollTop=b;break;case 2:d.scrollTop=b-(e-E());break;case 3:d.scrollTop=b-(e-E())/2;break}d.onscroll()}};var s=null;g.handleDragDrop=function(a,b,c,e,k){if(s){s.className=s.classNameOrig;s=null}if(a!=
"end"){var h=w(c);if(!h.selected&&h.drop)if(a=="drop")q.emit(g,{name:"dropEvent",eventObject:b,event:c},h.rowIdx,h.columnId,e,k);else{b.className="Wt-valid-drop";s=h.el;s.classNameOrig=s.className;s.className+=" Wt-drop-site"}else b.className=""}};g.onkeydown=function(a){var b=a||window.event;if(b.keyCode==9){f.cancelEvent(b);var c=w(b);if(c.el){a=c.el.parentNode;c=x(c.el);var e=x(a),k=a.parentNode.childNodes.length,h=a.childNodes.length;b=b.shiftKey;for(var i=false,j=c,m;;){for(;b?j>=0:j<h;j=b?j-
1:j+1)for(m=j==c&&!i?b?e-1:e+1:b?k-1:0;b?m>=0:m<k;m=b?m-1:m+1){if(j==c&&m==e)return;a=a.parentNode.childNodes[m];var n=$(a.childNodes[j]).find(":input");if(n.size()>0){setTimeout(function(){n.focus();n.select()},0);return}}j=b?h-1:0;i=true}}}else if(b.keyCode>=37&&b.keyCode<=40){i=f.target(b);function o(t){return f.hasTag(t,"INPUT")&&t.type=="text"||f.hasTag(t,"TEXTAREA")}if(!f.hasTag(i,"SELECT")){c=w(b);if(c.el){a=c.el.parentNode;c=x(c.el);e=x(a);k=a.parentNode.childNodes.length;h=a.childNodes.length;
switch(b.keyCode){case 39:if(o(i)){j=f.getSelectionRange(i);if(j.start!=i.value.length)return}e++;break;case 38:c--;break;case 37:if(o(i)){j=f.getSelectionRange(i);if(j.start!=0)return}e--;break;case 40:c++;break;default:return}f.cancelEvent(b);if(c>-1&&c<h&&e>-1&&e<k){a=a.parentNode.childNodes[e];n=$(a.childNodes[c]).find(":input");n.size()>0&&setTimeout(function(){n.focus()},0)}}}}};this.autoJavaScript=function(){if(g.parentNode==null){g=d=l=null;this.autoJavaScript=function(){}}else if(!f.isHidden(g)){if(!f.isIE&&
(u!=d.scrollTop||p!=d.scrollLeft)){if(typeof p==="undefined")if(b&&f.isGecko)l.scrollLeft=d.scrollLeft=p=0;else p=d.scrollLeft;else l.scrollLeft=d.scrollLeft=p;r.scrollTop=d.scrollTop=u}b=g.offsetWidth-f.px(g,"borderLeftWidth")-f.px(g,"borderRightWidth");var a=d.offsetWidth-d.clientWidth;b-=r.clientWidth;if(b>200&&b!=d.tw){d.tw=b;d.style.width=b+"px";l.style.width=b-a+"px"}var b=$(document.body).hasClass("Wt-rtl");if(b)l.style.marginLeft=a+"px";else l.style.marginRight=a+"px";a=d.offsetHeight-d.clientHeight;
if((b=r.style)&&b.marginBottom!==a+"px"){b.marginBottom=a+"px";q.layouts2.adjust(g.childNodes[0].id,[[1,0]])}}}});
